(function(){"use strict";var e={7733:function(e,t,o){var n=o(9242),r=o(3396);const a=["innerHTML"];function i(e,t,o,i,s,l){const m=(0,r.up)("cities-buttons"),c=(0,r.up)("modal-form"),d=(0,r.up)("modal-response");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(m,{citiesList:e.citiesList.slice(0,2),onSetCityId:t[0]||(t[0]=t=>e.setCityId(t))},null,8,["citiesList"]),(0,r.Wm)(n.uT,{name:"bounce",appear:"",onBeforeEnter:e.onBeforeEnter,onAfterLeave:e.onAfterLeave},{default:(0,r.w5)((()=>[e.showForm&&!e.response&&"responseEl"!==e.activeModal?((0,r.wg)(),(0,r.j4)(c,{key:0,id:"formEl",onMousedown:t[1]||(t[1]=t=>e.showForm=!1)})):(0,r.kq)("",!0)])),_:1},8,["onBeforeEnter","onAfterLeave"]),(0,r.Wm)(n.uT,{name:"bounce",appear:"",onBeforeEnter:e.onBeforeEnter,onAfterLeave:e.onAfterLeave},{default:(0,r.w5)((()=>[e.response&&"formEl"!==e.activeModal?((0,r.wg)(),(0,r.j4)(d,{key:0,id:"responseEl",onMousedown:t[2]||(t[2]=t=>e.response=null)},{default:(0,r.w5)((()=>[(0,r._)("div",{class:"modal-block",innerHTML:e.response},null,8,a)])),_:1})):(0,r.kq)("",!0)])),_:1},8,["onBeforeEnter","onAfterLeave"])],64)}var s=o(7139);const l={class:"container btn__list flex gap-[20px] py-[20px] md:gap-[17px] sm:gap-[10px] sm:flex-col sm:p-[10px]"},m=["onClick"];function c(e,t,o,n,a,i){return(0,r.wg)(),(0,r.iD)("div",l,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.formattedList,((t,o)=>((0,r.wg)(),(0,r.iD)("button",{class:(0,s.C_)(["btn",[`${n.colorsList[o%(n.colorsList.length-1)]}`]]),onClick:o=>e.$emit("setCityId",t.id)},"Заказать в "+(0,s.zw)(t.name),11,m)))),256))])}var d=o(4806),u=o.n(d),f={name:"index",props:{citiesList:{type:Array,default:()=>[{id:1,name:"Москва"}]}},setup({citiesList:e}){let t=["bg-blue-500","bg-teal-600","bg-fuchsia-500","bg-rose-600"];const o=(0,r.Fl)((()=>u().cloneDeep(e).map((e=>("а"===e.name.slice(-1)&&(e.name=e.name.slice(0,-1)+"у"),e)))));return{colorsList:t,formattedList:o}}},_=o(89);const p=(0,_.Z)(f,[["render",c],["__scopeId","data-v-0faa412a"]]);var v=p;const y=e=>((0,r.dD)("data-v-4c81d7e2"),e=e(),(0,r.Cn)(),e),h={class:"modal-form modal-overlay"},w=y((()=>(0,r._)("h2",{class:"modal-form__title font-medium text-[24px] mb-[23px] text-left"},"Заказать звонок",-1))),g={class:"modal-form__item"},b=y((()=>(0,r._)("label",{class:"modal-form__label",for:"name"},"Имя*",-1))),k={key:0,class:"modal-form__errors"},L=y((()=>(0,r._)("div",{class:"error-msg"},"Обязательно поле",-1))),E=[L],A={class:"modal-form__item"},x=y((()=>(0,r._)("label",{class:"modal-form__label",for:"phone"},"Телефон*",-1))),T={key:0,class:"modal-form__errors"},F=y((()=>(0,r._)("div",{class:"error-msg"},"Обязательно поле",-1))),C=[F],$={class:"modal-form__item"},I=y((()=>(0,r._)("label",{class:"modal-form__label",for:"email"},"Email*",-1))),S={key:0,class:"modal-form__errors"},M=y((()=>(0,r._)("div",{class:"error-msg"},"Обязательно поле",-1))),V=[M],D={class:"modal-form__item relative md:col-span-2 sm:col-span-1"},O=y((()=>(0,r._)("label",{class:"modal-form__label",for:"city"},"Город*",-1))),j={class:"modal-form__city truncate"},q={key:0,class:"modal-form__select absolute left-0 rounded-md overflow-x-hidden cursor-pointer overflow-y-auto w-full top-[105%] max-h-[145px] sm:top-[auto] sm:bottom-[70%]"},Z=["value","onClick"],U=y((()=>(0,r._)("div",{class:"modal-form__submit col-end-5 md:col-end-4 md:flex md:items-end sm:col-end-auto"},[(0,r._)("button",{class:"py-[11px] w-full text-white bg-green-600 rounded-md",type:"submit"},"Отправить")],-1)));function B(e,t,o,a,i,l){const m=(0,r.Q2)("mask");return(0,r.wg)(),(0,r.iD)("div",h,[(0,r._)("div",{class:"modal-form__block modal-block",onMousedown:t[6]||(t[6]=(0,n.iM)((()=>{}),["stop"]))},[w,(0,r._)("form",{class:"modal-form__main",onSubmit:t[5]||(t[5]=(0,n.iM)(((...t)=>e.sendForm&&e.sendForm(...t)),["prevent"]))},[(0,r._)("div",g,[b,(0,r.wy)((0,r._)("input",{class:(0,s.C_)(["modal-form__input",[{"!border-red-500":e.v$.name.$error}]]),id:"name","onUpdate:modelValue":t[0]||(t[0]=t=>e.form.name=t),type:"text",name:"name",placeholder:"Иван Иванов"},null,2),[[n.nr,e.form.name]]),e.v$.name.$error?((0,r.wg)(),(0,r.iD)("div",k,E)):(0,r.kq)("",!0)]),(0,r._)("div",A,[x,(0,r.wy)((0,r._)("input",{class:(0,s.C_)(["modal-form__input",[{"!border-red-500":e.v$.phone.$error}]]),id:"phone",onInput:t[1]||(t[1]=(...t)=>e.setPhone&&e.setPhone(...t)),type:"tel",name:"phone",placeholder:"+7 (___) ___-__-__"},null,34),[[m,"+7(###) ###-##-##"]]),e.v$.phone.$error?((0,r.wg)(),(0,r.iD)("div",T,C)):(0,r.kq)("",!0)]),(0,r._)("div",$,[I,(0,r.wy)((0,r._)("input",{class:(0,s.C_)(["modal-form__input",[{"!border-red-500":e.v$.email.$error}]]),id:"email","onUpdate:modelValue":t[2]||(t[2]=t=>e.form.email=t),type:"text",name:"email",placeholder:"you@example.com"},null,2),[[n.nr,e.form.email]]),e.v$.email.$error?((0,r.wg)(),(0,r.iD)("div",S,V)):(0,r.kq)("",!0)]),(0,r._)("div",D,[O,(0,r._)("div",{class:"modal-form__input w-full flex justify-between items-center",id:"city",onClick:t[3]||(t[3]=(0,n.iM)((t=>e.selectActivated=!e.selectActivated),["stop"]))},[(0,r._)("div",j,(0,s.zw)(e.citiesList.find((({id:t})=>t===e.form["city_id"])).name),1),(0,r._)("div",{class:(0,s.C_)(["modal-form__arrow transition-all duration-500",{"rotate-180 !mt-[10px]":e.selectActivated}])},null,2)]),(0,r.Wm)(n.uT,{name:"bounce",appear:"",onClick:t[4]||(t[4]=(0,n.iM)((()=>{}),["stop"]))},{default:(0,r.w5)((()=>[e.selectActivated?((0,r.wg)(),(0,r.iD)("div",q,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.citiesList,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"modal-form__option truncate",key:t.id,value:t.id,onClick:()=>{e.form["city_id"]=t.id,e.selectActivated=!1}},(0,s.zw)(t.name),9,Z)))),128))])):(0,r.kq)("",!0)])),_:1})]),U],32)],32)])}var H=o(9414),N=o(3053),z=o(9117),P=o(4870),R=o(65),W=(0,r.aZ)({name:"index",directives:{mask:H.mask},setup(){const e=(0,R.oR)();let t=(0,r.Fl)((()=>e.getters["cities/citiesList"])),o=(0,P.iH)(!1);function n(){o.value&&(o.value=!1)}(0,r.bv)((()=>{document.addEventListener("click",n)})),(0,r.Ah)((()=>{document.removeEventListener("click",n)}));const a=(0,r.Fl)((()=>e.getters["form/form"]));function i(e){a.value.phone=e.target.value.replace(/[^+|\d;]/g,"")}const s={name:{required:z.C1,minLengthValue:(0,z.Ei)(2),alpha:e=>/^[A-Za-zА-Яа-я\s]+$/.test(e)},phone:{required:z.C1,realPhone:e=>/^(\s*)?(\+)?([- ():=+]?\d[- ():=+]?){7,14}(\s*)?$/.test(e),minLengthValue:(0,z.Ei)(12)},email:{required:z.C1,email:z.Do,realEmail:e=>/^[A-Za-z0-9]+([a-zA-Z0-9_.-]+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/i.test(e)},["city_id"]:{required:z.C1}},l=(0,N.Xw)(s,a);async function m(){if(await l.value.$validate(),!l.value.$invalid){let t=await e.dispatch("form/sendForm");t&&l.value.$reset()}}return{citiesList:t,selectActivated:o,setPhone:i,sendForm:m,form:a,v$:l}}});const Y=(0,_.Z)(W,[["render",B],["__scopeId","data-v-4c81d7e2"]]);var K=Y;const Q={class:"modal-response modal-overlay"};function X(e,t,o,n,a,i){return(0,r.wg)(),(0,r.iD)("div",Q,[(0,r.WI)(e.$slots,"default")])}var G={name:"index"};const J=(0,_.Z)(G,[["render",X]]);var ee=J,te=(0,r.aZ)({name:"App",components:{citiesButtons:v,modalForm:K,modalResponse:ee},setup(e){const t=(0,R.oR)(),o=(0,P.iH)("formEl"),n=(0,r.Fl)({get:()=>t.getters["form/showForm"],set:e=>{t.dispatch("form/setValueInState",{key:"showForm",value:e})}}),a=(0,r.Fl)({get:()=>t.getters["form/response"],set:e=>{t.dispatch("form/setValueInState",{key:"response",value:e})}});let i=(0,r.Fl)((()=>t.getters["cities/citiesList"]));function s(e){o.value=e.id}function l(e){o.value=""}function m(e){t.dispatch("form/setValueInForm",{key:"city_id",value:e}),n.value=!0}return{citiesList:i,showForm:n,response:a,activeModal:o,onBeforeEnter:s,onAfterLeave:l,setCityId:m}}});const oe=(0,_.Z)(te,[["render",i]]);var ne=oe,re={namespaced:!0,state:{citiesList:[{id:1,name:"Москва"},{id:2,name:"Санкт-Петербург"},{id:3,name:"Казань"}]},getters:{citiesList:({citiesList:e})=>e},mutations:{},actions:{}},ae=o(4311),ie={namespaced:!0,state:{form:{name:"",phone:"",email:"",["city_id"]:""},showForm:!1,response:null},getters:{form:({form:e},t,o,n)=>(e["city_id"]||(e["city_id"]=n["cities/citiesList"][0].id),e),showForm:({showForm:e})=>e,response:({response:e})=>e},mutations:{SET_VALUE_IN_STATE(e,{key:t,value:o}){e[t]=o},SET_VALUE_IN_FORM(e,{key:t,value:o}){e.form[t]=o}},actions:{setValueInState({commit:e},{key:t,value:o}){e("SET_VALUE_IN_STATE",{key:t,value:o})},setValueInForm({commit:e},{key:t,value:o}){e("SET_VALUE_IN_FORM",{key:t,value:o})},async sendForm({commit:e,state:t}){return await(0,ae.Z)({method:"post",url:"http://hh.autodrive-agency.ru/test-tasks/front/task-7/",data:t.form,headers:{"Content-Type":"application/json"}}).then((t=>(e("SET_VALUE_IN_STATE",{key:"response",value:t.data}),e("SET_VALUE_IN_STATE",{key:"form",value:{name:"",phone:"",email:"",["city_id"]:""}}),!0))).catch((t=>(e("SET_VALUE_IN_STATE",{key:"response",value:t.response.data}),!1)))}}},se=(0,R.MT)({state:{},getters:{},mutations:{},actions:{},modules:{cities:re,form:ie}});(0,n.ri)(ne).use(se).mount("#app")}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.loaded=!0,a.exports}o.m=e,function(){var e=[];o.O=function(t,n,r,a){if(!n){var i=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],a=e[c][2];for(var s=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(s=!1,a<i&&(i=a));if(s){e.splice(c--,1);var m=r();void 0!==m&&(t=m)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,r,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,a,i=n[0],s=n[1],l=n[2],m=0;if(i.some((function(t){return 0!==e[t]}))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(l)var c=l(o)}for(t&&t(n);m<i.length;m++)a=i[m],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(c)},n=self["webpackChunkautodrive_agency"]=self["webpackChunkautodrive_agency"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(7733)}));n=o.O(n)})();
//# sourceMappingURL=app.43089db4.js.map